<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div th:replace="fragments/loggedInHeader :: header(principal=${principal})"></div>

<div th:if="${notcreator==false}">
    <p>Do you want to to go</p>
    <form th:action="'/Potlucks/'+${newPotluck.id}" method="post">
        <input type='submit' name='action' value='yes' />
        <input type='submit' name='action' value='no' />
    </form>
</div>

<h1 th:text="${newPotluck.eventname}"></h1>
Creator: <p th:text="${newPotluck.creator.firstname}+' ' +${newPotluck.creator.lastname}"></p>
Date: <p th:text="${newPotluck.dateofPotluck}"></p>
Location: <p th:text="${newPotluck.location}"></p>
Additional Details: <p th:if="${curruser==false}" th:text="${newPotluck.details != null} ? ${newPotluck.details} : none"></p>
    <form th:if="${curruser==true}" action="/updateDetails" method="post">
        <textarea rows="5" cols="60" th:text="${newPotluck.details}" name="details"></textarea>
    <input type='submit' name='update' value='Update Details' /></form>
<p th:if="${curruser==true}" th:text="${'ShareCode: ' + newPotluck.code}"></p>


<p>List of Items for the event:</p>
<span th:if="${newPotluck.attendees.size() == 0 }">This list is empty.</span>
<ul th:if="${newPotluck.potluckItemList.size() > 0 }">
    <li th:each="item :${newPotluck.potluckItemList}">
        <p th:text="${item.user.username}+':'+${item.item}+${item.quantity}"></p>
    </li>
</ul>


<form th:if="${curruser!=null}" th:action="@{/addItem}" method="POST">
    Item: <input type="text" name="itemName" /> Quantity: <input type="number" name="quantity" min="1"/>
    <input type="submit" value="add" />
</form>


<div th:if="${newPotluck.attendees.size()>0}">
    <h3>Here is the list of people planning to attend this event</h3>
    <ul>
        <li th:each="attendee : ${newPotluck.attendees}">

            <p th:text="${attendee.firstname}+' '+${attendee.lastname}"></p>
        </li>
    </ul>
</div>

<form th:if="${curruser==true}" th:action="'/delete/'+${newPotluck.id}" method="POST">
    <button type="submit">Delete</button>
</form>


<div th:replace="fragments/footer :: foot"></div>
</body>
</html>